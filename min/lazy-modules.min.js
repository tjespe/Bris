app.controller("weatherCtrl",["$http","$scope","$window","$location","$routeParams","$httpx",function(m,b,r,k,t,e){var a=this;b.master.data=[];a.timezone=-((new Date).getTimezoneOffset()/60);a.rawdata=[];for(var g in b.master.recents)b.master.recents.hasOwnProperty(g)&&18E5<Date.now()-b.master.recents[g].info.savedAt&&navigator.onLine&&delete b.master.recents[g];if(b.master.recents.hasOwnProperty(k.path()))b.master.location=b.master.recents[k.path()].info.location,b.master.data=b.master.recents[k.path()].data;
else{var q=function(){b.master.location=b.master.textData.yourApproxPosition;m.get("https://freegeoip.net/json/").success(function(b){u({coords:{latitude:b.latitude,longitude:b.longitude}})})},u=function(g){g="?lat="+g.coords.latitude+"&long="+g.coords.longitude+"&gmt="+a.timezone+"&d="+Math.round(Date.now()/18E5);e.get("https://real-timer-server.tk:2087/get-weather.php"+g,{lifetime:0,alt_urls:["https://script.google.com/macros/s/AKfycby5B-zyPL5Zse2T_CZhZ92NqTM5tp2fu6J2t-KZMOYPxYOeVXfb/exec"+g,"https://bris-cdn.cf/get-weather.php"+
g]}).then(function(p){Array.prototype.push.apply(a.rawdata,p.data);p=[];for(var f=0;f<a.rawdata.length;f++){var h=a.rawdata[f].icon;a.rawdata[f].offset=!1;a.rawdata[f].showImg=!0;if(/^[\d]+$/.test(h))a.rawdata[f].background="",a.rawdata[f].foreground="src/img/modern-icons/"+h+".png";else if(/^\d+d$/.test(h))"01d"==h?(a.rawdata[f].background="",a.rawdata[f].foreground="src/img/modern-icons/01db.png"):"02d"==h?(a.rawdata[f].background="src/img/modern-icons/01db.png",a.rawdata[f].foreground="src/img/modern-icons/02f.png"):
(a.rawdata[f].background="src/img/modern-icons/db.png",a.rawdata[f].foreground="src/img/modern-icons/"+h.substring(0,2)+"f.png");else if(/^\d+m$/.test(h))a.rawdata[f].background="01m"==h?"src/img/modern-icons/01mb.png":"src/img/modern-icons/mb.png",a.rawdata[f].foreground="src/img/modern-icons/"+h.substring(0,2)+"f.png";else if(/^mf\/\d+n\.\d+$/.test(h)){var g=h.substring(7,9);/^mf\/0[12]n\.\d{2}$/.test(h)||(a.rawdata[f].offset=!0);a.rawdata[f].phase=50>=g?.5*-g:25-.5*(g-50);"01"===h.substring(3,
5)?a.rawdata[f].showImg=!1:a.rawdata[f].foreground="src/img/modern-icons/"+h.substring(3,5)+"f.png"}h=Number(a.rawdata[f].date);"undefined"===typeof p[h]&&(p[h]=[]);p[h].push(a.rawdata[f])}f=[];h=(new Date).getUTCDate();g=(new Date((new Date).getFullYear(),(new Date).getUTCMonth(),0)).getDate();for(var e=h;e<h+g;e++){var c=e>g?e-g:e;if("undefined"!==typeof p[c]){var d={data:[]};if(4<p[c].length){for(var l=0;l<p[c].length;l++){var n=Number(p[c][l].hour);n=6>n?0:12>n?1:18>n?2:3;"undefined"===typeof d.data[n]&&
(d.data[n]={data:[]});d.data[n].data.push(p[c][l])}d.data.clean();for(c=0;c<d.data.length;c++){l=d.data[c].data[0];n=d.data[c].data.slice(-1)[0];d.data[c].hour=l.hour;d.data[c].hourTo=n.hourTo;d.data[c].background=l.background;d.data[c].foreground=l.foreground;d.data[c].icon=l.icon;d.data[c].offset=l.offset;d.data[c].phase=l.phase;d.data[c].summarizeable=!0;d.data[c].currently_summarized=!0;for(var q=n=l=0,m=0;m<d.data[c].data.length;m++)l+=Number(d.data[c].data[m].degs),n+=Number(d.data[c].data[m].precipitation),
q+=Number(d.data[c].data[m].wind);d.data[c].degs=Math.round(l/d.data[c].data.length);d.data[c].precipitation=Math.round(100*n)/100;d.data[c].wind=Math.round(q/d.data[c].data.length)}c=(new Date(1E3*d.data[0].data[0].unix)).getDay();d.day=b.master.textData.weekdays[0<c?c-1:6]}else{d.data=p[c];for(c=0;c<d.data.length;c++)d.data[c].data=[],d.data[c].summarizeable=!1,d.data[c].currently_summarized=!0;c=(new Date(1E3*d.data[0].unix)).getDay()}d.day=b.master.textData.weekdays[0<c?c-1:6];f.push(d)}}b.master.data=
f;b.master.recents[k.path()]={data:f,info:{url:k.path(),location:b.master.location,savedAt:Date.now()}};"undefined"!==typeof Storage&&(localStorage.recents=JSON.stringify(b.master.recents))})["catch"](function(b,a){q()})};g=function(){b.master.location=t.place;var a="?input="+encodeURIComponent(t.place);e.get("https://real-timer-server.tk:2087/get-coordinates.php"+a,{lifetime:Infinity,alt_urls:["https://script.google.com/macros/s/AKfycbydJkKZ1KJSqR_LxtMOoa5Zlmq3F4NJ80e9x0kRMXUWmgmpKqs8/exec"+a,"https://bris-cdn.cf/get-coordinates.php"+
a]}).then(function(b){u({coords:{latitude:b.results[0].geometry.location.lat,longitude:b.results[0].geometry.location.lng}})})};("undefined"===typeof Storage||"undefined"!==typeof Storage&&"true"!=localStorage.hideFlipDeviceTip)&&515>=window.innerWidth&&(b.master.hideFlipDeviceTip=!1);3<k.path().length?g():navigator.geolocation?(b.master.location=b.master.textData.yourExactPosition,navigator.geolocation.getCurrentPosition(u,q)):q()}angular.element(r).on("resize",function(){b.$apply(function(){b.master.height=
window.innerHeight;b.master.width=window.innerWidth;515<b.master.width&&(b.master.hideFlipDeviceTip=!0,"undefined"!==typeof Storage&&(localStorage.hideFlipDeviceTip=!0))})});"undefined"!==typeof Storage&&(localStorage.visits=Number(localStorage.visits||0)+1);Array.prototype.clean=function(b){for(var a=0;a<this.length;a++)this[a]==b&&(this.splice(a,1),a--);return this}}]);app.controller("searchController",["$http","$scope","$q","$sce","$httpx",function(m,b,r,k,t){var e=this;e.query="";e.matches=[];e.error=!1;e.loading=!1;e.search=function(){e.loading=!0;var a="?input="+encodeURIComponent(e.query);t.get("https://real-timer-server.tk:2087/place-search.php"+a,{lifetime:Infinity,alt_urls:["https://script.google.com/macros/s/AKfycby5ASPEN1ESxoUZru80yqRXBNVm4C5MkDcHL5asJs3KADFW1huc/exec"+a,"https://bris-cdn.cf/place-search.php"+a]}).then(function(a){e.matches=a.predictions;
e.loading=!1;for(a=0;a<e.matches.length;a++){var b=e.matches[a].terms[e.matches[a].terms.length-1].value,g={Sverige:"swe","\u00c5land Islands":"ala",Algeria:"dza","American Samoa":"asm",Angola:"ago",Anguilla:"aia",Antarctica:"ata","Antigua and Barbuda":"atg",Aruba:"abw",Austria:"aut","The Bahamas":"bhs",Bahamas:"bhs",Bahrain:"bhr",Bangladesh:"bgd",Barbados:"brb",Belarus:"blr",Belize:"blz",Bermuda:"bmu",Bhutan:"btn","Bonaire, Sint Eustatius and Saba":"bes","Bosnia and Herzegovina":"bih",Botswana:"bwa",
"Bouvet Island":"bvt","British Indian Ocean Territory":"iot","United States Minor Outlying Islands":"umi","Virgin Islands (British)":"vgb","Brunei Darussalam":"brn",Bulgaria:"bgr","Burkina Faso":"bfa",Burundi:"bdi",Cambodia:"khm",Cameroon:"cmr","Cabo Verde":"cpv","Cayman Islands":"cym","Central African Republic":"caf",Chad:"tcd",Chile:"chl",China:"chn","Christmas Island":"cxr","Cocos (Keeling) Islands":"cck",Congo:"cog","Democratic Republic of the Congo":"cod","Cook Islands":"cok","Costa Rica":"cri",
Croatia:"hrv","Cura\u00e7ao":"cuw",Denmark:"dnk",Dominica:"dma","El Salvador":"slv","Equatorial Guinea":"gnq","Falkland Islands (Malvinas)":"flk","Faroe Islands":"fro",Fiji:"fji","French Guiana":"guf","French Polynesia":"pyf","French Southern Territories":"atf",Gambia:"gmb",Germany:"deu",Greece:"grc",Greenland:"grl",Grenada:"grd",Guadeloupe:"glp",Guam:"gum",Guatemala:"gtm",Guernsey:"ggy",Guinea:"gin","Guinea-Bissau":"gnb",Haiti:"hti","Heard Island and McDonald Islands":"hmd","Holy See":"vat",Honduras:"hnd",
"Hong Kong":"hkg",Iceland:"isl",Indonesia:"idn","C\u00f4te d'Ivoire":"civ",Iran:"irn",Iraq:"irq",Ireland:"irl","Isle of Man":"imn",Japan:"jpn",Jersey:"jey",Kuwait:"kwt",Kyrgyzstan:"kgz",Latvia:"lva",Lebanon:"lbn",Lesotho:"lso",Liberia:"lbr",Libya:"lby",Lithuania:"ltu","Macedonia (FYROM)":"mkd",Madagascar:"mdg",Malawi:"mwi",Malaysia:"mys",Maldives:"mdv",Mali:"mli",Malta:"mlt","Marshall Islands":"mhl",Martinique:"mtq",Mauritania:"mrt",Mauritius:"mus",Mayotte:"myt",Micronesia:"fsm",Moldova:"mda",Monaco:"mco",
Mongolia:"mng",Montenegro:"mne",Montserrat:"msr",Morocco:"mar",Myanmar:"mmr",Nauru:"nru",Nepal:"npl",Netherlands:"nld","New Caledonia":"ncl","New Zealand":"nzl",Niger:"ner",Nigeria:"nga","Norfolk Island":"nfk","North Korea":"prk","Northern Mariana Islands":"mnp",Oman:"omn",Palau:"plw",Palestine:"pse","Papua New Guinea":"png",Paraguay:"pry",Philippines:"phl",Pitcairn:"pcn",Portugal:"prt","Puerto Rico":"pri","Republic of Kosovo":"kos","R\u00e9union":"reu",Romania:"rou","Saint Barth\u00e9lemy":"blm",
"Saint Helena, Ascension and Tristan da Cunha":"shn","Saint Kitts and Nevis":"kna","Saint Lucia":"lca","Saint Martin (French part)":"maf","Saint Pierre and Miquelon":"spm","Saint Vincent and the Grenadines":"vct",Samoa:"wsm","San Marino":"smr","Sao Tome and Principe":"stp",Serbia:"srb",Seychelles:"syc","Sierra Leone":"sle",Singapore:"sgp","Sint Maarten (Dutch part)":"sxm",Slovakia:"svk",Slovenia:"svn","Solomon Islands":"slb","South Africa":"zaf","South Georgia and the South Sandwich Islands":"sgs",
"South Sudan":"ssd",Spain:"esp","Sri Lanka":"lka",Sudan:"sdn","Svalbard and Jan Mayen":"sjm",Swaziland:"swz",Switzerland:"che",Taiwan:"twn",Tajikistan:"tjk",Tanzania:"tza","Timor-Leste":"tls",Togo:"tgo",Tokelau:"tkl","Trinidad and Tobago":"tto",Turkmenistan:"tkm","Turks and Caicos Islands":"tca","United Arab Emirates":"are","United Kingdom":"gbr","United States":"usa",Uruguay:"ury",Vanuatu:"vut","Viet Nam":"vnm","Wallis and Futuna":"wlf","Western Sahara":"esh",Zambia:"zmb",Zimbabwe:"zwe"};b in g&&
(b=g[b]);e.matches[a].country=b.substr(0,3).toLowerCase()}})}}]);app.controller("cookieCtrl",["$timeout","$scope",function(m,b){function r(b,e){return(e=document.cookie.match("(^|;)\\s*"+b+"\\s*=\\s*([^;]+)"))?e.pop():""}var k=this;k.closed=!1;k.transparent=!0;k.close=function(){"undefined"!==typeof Storage?localStorage.cookieAccept="true":document.cookie="cookieaccept=visit";k.transparent=!0;m(function(){return k.closed=!0},500)};"undefined"!==typeof Storage&&"true"!=localStorage.cookieAccept&&"visit"!=r("cookieaccept")?m(function(){k.transparent=!1;m(k.close,
5E3)},2500):k.close()}]);