app.controller("weatherCtrl",["$http","$scope","$window","$location","$routeParams","$httpx",function(m,a,r,k,t,g){var e=this;a.master.data=[];e.timezone=-((new Date).getTimezoneOffset()/60);e.rawdata=[];for(var c in a.master.recents)a.master.recents.hasOwnProperty(c)&&18E5<Date.now()-a.master.recents[c].info.savedAt&&navigator.onLine&&delete a.master.recents[c];if(a.master.recents.hasOwnProperty(k.path()))a.master.location=a.master.recents[k.path()].info.location,a.master.data=a.master.recents[k.path()].data;
else{var p=function(){a.master.location=a.master.textData.yourApproxPosition;m.get("https://freegeoip.net/json/").success(function(a){u({coords:{latitude:a.latitude,longitude:a.longitude}})})},u=function(c){c="?lat="+c.coords.latitude+"&long="+c.coords.longitude+"&gmt="+e.timezone+"&d="+Math.round(Date.now()/18E5);g.get("https://real-timer-server.tk:2087/get-weather.php"+c,{withCredentials:!0,lifetime:0,alt_urls:["https://script.google.com/macros/s/AKfycby5B-zyPL5Zse2T_CZhZ92NqTM5tp2fu6J2t-KZMOYPxYOeVXfb/exec"+
c,"https://bris-cdn.cf/get-weather.php"+c]}).then(function(c){Array.prototype.push.apply(e.rawdata,c.data);c=[];for(var f=0;f<e.rawdata.length;f++){var h=e.rawdata[f].icon;e.rawdata[f].offset=!1;e.rawdata[f].showImg=!0;if(/^[\d]+$/.test(h))e.rawdata[f].background="",e.rawdata[f].foreground="src/img/modern-icons/"+h+".png";else if(/^\d+d$/.test(h))"01d"==h?(e.rawdata[f].background="",e.rawdata[f].foreground="src/img/modern-icons/01db.png"):"02d"==h?(e.rawdata[f].background="src/img/modern-icons/01db.png",
e.rawdata[f].foreground="src/img/modern-icons/02f.png"):(e.rawdata[f].background="src/img/modern-icons/db.png",e.rawdata[f].foreground="src/img/modern-icons/"+h.substring(0,2)+"f.png");else if(/^\d+m$/.test(h))e.rawdata[f].background="01m"==h?"src/img/modern-icons/01mb.png":"src/img/modern-icons/mb.png",e.rawdata[f].foreground="src/img/modern-icons/"+h.substring(0,2)+"f.png";else if(/^mf\/\d+n\.\d+$/.test(h)){var g=h.substring(7,9);/^mf\/0[12]n\.\d{2}$/.test(h)||(e.rawdata[f].offset=!0);e.rawdata[f].phase=
50>=g?.5*-g:25-.5*(g-50);"01"===h.substring(3,5)?e.rawdata[f].showImg=!1:e.rawdata[f].foreground="src/img/modern-icons/"+h.substring(3,5)+"f.png"}h=Number(e.rawdata[f].date);"undefined"===typeof c[h]&&(c[h]=[]);c[h].push(e.rawdata[f])}f=[];h=(new Date).getUTCDate();g=(new Date((new Date).getFullYear(),(new Date).getUTCMonth(),0)).getDate();for(var q=h;q<h+g;q++){var b=q>g?q-g:q;if("undefined"!==typeof c[b]){var d={data:[]};if(4<c[b].length){for(var l=0;l<c[b].length;l++){var n=Number(c[b][l].hour);
n=6>n?0:12>n?1:18>n?2:3;"undefined"===typeof d.data[n]&&(d.data[n]={data:[]});d.data[n].data.push(c[b][l])}d.data.clean();for(b=0;b<d.data.length;b++){l=d.data[b].data[0];n=d.data[b].data.slice(-1)[0];d.data[b].hour=l.hour;d.data[b].hourTo=n.hourTo;d.data[b].background=l.background;d.data[b].foreground=l.foreground;d.data[b].icon=l.icon;d.data[b].offset=l.offset;d.data[b].phase=l.phase;d.data[b].summarizeable=!0;d.data[b].currently_summarized=!0;for(var p=n=l=0,m=0;m<d.data[b].data.length;m++)l+=
Number(d.data[b].data[m].degs),n+=Number(d.data[b].data[m].precipitation),p+=Number(d.data[b].data[m].wind);d.data[b].degs=Math.round(l/d.data[b].data.length);d.data[b].precipitation=Math.round(100*n)/100;d.data[b].wind=Math.round(p/d.data[b].data.length)}b=(new Date(1E3*d.data[0].data[0].unix)).getDay();d.day=a.master.textData.weekdays[0<b?b-1:6]}else{d.data=c[b];for(b=0;b<d.data.length;b++)d.data[b].data=[],d.data[b].summarizeable=!1,d.data[b].currently_summarized=!0;b=(new Date(1E3*d.data[0].unix)).getDay()}d.day=
a.master.textData.weekdays[0<b?b-1:6];f.push(d)}}a.master.data=f;a.master.recents[k.path()]={data:f,info:{url:k.path(),location:a.master.location,savedAt:Date.now()}};"undefined"!==typeof Storage&&(localStorage.recents=JSON.stringify(a.master.recents))})["catch"](function(c,a){p()})};c=function(){a.master.location=t.place;var c="?input="+encodeURIComponent(t.place);g.get("https://real-timer-server.tk:2087/get-coordinates.php"+c,{withCredentials:!0,lifetime:Infinity,alt_urls:["https://script.google.com/macros/s/AKfycbydJkKZ1KJSqR_LxtMOoa5Zlmq3F4NJ80e9x0kRMXUWmgmpKqs8/exec"+
c,"https://bris-cdn.cf/get-coordinates.php"+c]}).then(function(c){u({coords:{latitude:c.results[0].geometry.location.lat,longitude:c.results[0].geometry.location.lng}})})};("undefined"===typeof Storage||"undefined"!==typeof Storage&&"true"!=localStorage.hideFlipDeviceTip)&&515>=window.innerWidth&&(a.master.hideFlipDeviceTip=!1);3<k.path().length?c():navigator.geolocation?(a.master.location=a.master.textData.yourExactPosition,navigator.geolocation.getCurrentPosition(u,p)):p()}angular.element(r).on("resize",
function(){a.$apply(function(){a.master.height=window.innerHeight;a.master.width=window.innerWidth;515<a.master.width&&(a.master.hideFlipDeviceTip=!0,"undefined"!==typeof Storage&&(localStorage.hideFlipDeviceTip=!0))})});"undefined"!==typeof Storage&&(localStorage.visits=Number(localStorage.visits||0)+1);Array.prototype.clean=function(c){for(var a=0;a<this.length;a++)this[a]==c&&(this.splice(a,1),a--);return this}}]);app.controller("searchController",["$http","$scope","$q","$sce","$httpx",function(m,a,r,k,t){var g=this;g.query="";g.matches=[];g.error=!1;g.search=function(){var a="?input="+encodeURIComponent(g.query);t.get("https://real-timer-server.tk:2087/place-search.php"+a,{withCredentials:!0,lifetime:Infinity,alt_urls:["https://script.google.com/macros/s/AKfycby5ASPEN1ESxoUZru80yqRXBNVm4C5MkDcHL5asJs3KADFW1huc/exec"+a,"https://bris-cdn.cf/place-search.php"+a]}).then(function(a){console.log(a);g.matches=a.predictions;
for(a=0;a<g.matches.length;a++){var c=g.matches[a].terms[g.matches[a].terms.length-1].value,e={"United States":"usa",Iran:"irn","United Kingdom":"gbr",Germany:"deu",Spain:"esp",Malaysia:"mys",Malta:"mlt","United Arab Emirates":"are",Japan:"jpn",Denmark:"dnk",Philippines:"phl",Bangladesh:"bgd"};c in e&&(c=e(c));g.matches[a].country=c.substr(0,3).toLowerCase()}})}}]);app.controller("cookieCtrl",["$timeout","$scope",function(m,a){function r(a,g){return(g=document.cookie.match("(^|;)\\s*"+a+"\\s*=\\s*([^;]+)"))?g.pop():""}var k=this;k.closed=!1;k.transparent=!0;k.close=function(){"undefined"!==typeof Storage?localStorage.cookieAccept="true":document.cookie="cookieaccept=visit";k.transparent=!0;m(function(){return k.closed=!0},500)};"undefined"!==typeof Storage&&"true"!=localStorage.cookieAccept&&"visit"!=r("cookieaccept")?m(function(){k.transparent=!1;m(k.close,
5E3)},2500):k.close()}]);