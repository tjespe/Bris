app.controller("weatherCtrl",["$http","$scope","$window","$location","$routeParams","$httpx",function(q,a,r,e,n,l){var g=this;a.master.data=[];g.timezone=-((new Date).getTimezoneOffset()/60);g.rawdata=[];for(var k in a.master.recents)a.master.recents.hasOwnProperty(k)&&18E5<Date.now()-a.master.recents[k].info.savedAt&&navigator.onLine&&delete a.master.recents[k];if(a.master.recents.hasOwnProperty(e.path()))a.master.location=a.master.recents[e.path()].info.location,a.master.data=a.master.recents[e.path()].data;
else{var b=function(){a.master.location=a.master.textData.yourApproxPosition;q.get("https://freegeoip.net/json/").success(function(a){t({coords:{latitude:a.latitude,longitude:a.longitude}})})},t=function(k){k="?lat="+k.coords.latitude+"&long="+k.coords.longitude+"&gmt="+g.timezone+"&d="+Math.round(Date.now()/18E5);l.get("https://real-timer-server.tk:2087/get-weather.php"+k,{lifetime:0,alt_urls:["https://script.google.com/macros/s/AKfycby5B-zyPL5Zse2T_CZhZ92NqTM5tp2fu6J2t-KZMOYPxYOeVXfb/exec"+k]}).then(function(b){Array.prototype.push.apply(g.rawdata,
b.data);b=[];for(var f=0;f<g.rawdata.length;f++){var h=g.rawdata[f].icon;g.rawdata[f].offset=!1;g.rawdata[f].showImg=!0;if(/^[\d]+$/.test(h))g.rawdata[f].background="",g.rawdata[f].foreground="src/img/modern-icons/"+h+".png";else if(/^\d+d$/.test(h))"01d"==h?(g.rawdata[f].background="",g.rawdata[f].foreground="src/img/modern-icons/01db.png"):"02d"==h?(g.rawdata[f].background="src/img/modern-icons/01db.png",g.rawdata[f].foreground="src/img/modern-icons/02f.png"):(g.rawdata[f].background="src/img/modern-icons/db.png",
g.rawdata[f].foreground="src/img/modern-icons/"+h.substring(0,2)+"f.png");else if(/^\d+m$/.test(h))g.rawdata[f].background="01m"==h?"src/img/modern-icons/01mb.png":"src/img/modern-icons/mb.png",g.rawdata[f].foreground="src/img/modern-icons/"+h.substring(0,2)+"f.png";else if(/^mf\/\d+n\.\d+$/.test(h)){var k=h.substring(7,9);/^mf\/0[12]n\.\d{2}$/.test(h)||(g.rawdata[f].offset=!0);g.rawdata[f].phase=50>=k?.5*-k:25-.5*(k-50);"01"===h.substring(3,5)?g.rawdata[f].showImg=!1:g.rawdata[f].foreground="src/img/modern-icons/"+
h.substring(3,5)+"f.png"}h=Number(g.rawdata[f].date);"undefined"===typeof b[h]&&(b[h]=[]);b[h].push(g.rawdata[f])}f=[];h=(new Date).getUTCDate();k=(new Date((new Date).getFullYear(),(new Date).getUTCMonth(),0)).getDate();for(var l=h;l<h+k;l++){var c=l>k?l-k:l;if("undefined"!==typeof b[c]){var d={data:[]};if(4<b[c].length){for(var m=0;m<b[c].length;m++){var p=Number(b[c][m].hour);p=6>p?0:12>p?1:18>p?2:3;"undefined"===typeof d.data[p]&&(d.data[p]={data:[]});d.data[p].data.push(b[c][m])}d.data.clean();
for(c=0;c<d.data.length;c++){m=d.data[c].data[0];p=d.data[c].data.slice(-1)[0];d.data[c].hour=m.hour;d.data[c].hourTo=p.hourTo;d.data[c].background=m.background;d.data[c].foreground=m.foreground;d.data[c].icon=m.icon;d.data[c].offset=m.offset;d.data[c].phase=m.phase;d.data[c].summarizeable=!0;d.data[c].currently_summarized=!0;for(var u=p=m=0,n=0;n<d.data[c].data.length;n++)m+=Number(d.data[c].data[n].degs),p+=Number(d.data[c].data[n].precipitation),u+=Number(d.data[c].data[n].wind);d.data[c].degs=
Math.round(m/d.data[c].data.length);d.data[c].precipitation=Math.round(100*p)/100;d.data[c].wind=Math.round(u/d.data[c].data.length)}c=(new Date(1E3*d.data[0].data[0].unix)).getDay();d.day=a.master.textData.weekdays[0<c?c-1:6]}else{d.data=b[c];for(c=0;c<d.data.length;c++)d.data[c].data=[],d.data[c].summarizeable=!1,d.data[c].currently_summarized=!0;c=(new Date(1E3*d.data[0].unix)).getDay()}d.day=a.master.textData.weekdays[0<c?c-1:6];f.push(d)}}a.master.data=f;a.master.recents[e.path()]={data:f,info:{url:e.path(),
location:a.master.location,savedAt:Date.now()}};"undefined"!==typeof Storage&&(localStorage.recents=JSON.stringify(a.master.recents))})["catch"](function(a,k){b()})};k=function(){a.master.location=n.place;var b="?input="+encodeURIComponent(n.place);l.get("https://real-timer-server.tk:2087/get-coordinates.php"+b,{lifetime:Infinity,alt_urls:["https://script.google.com/macros/s/AKfycbydJkKZ1KJSqR_LxtMOoa5Zlmq3F4NJ80e9x0kRMXUWmgmpKqs8/exec"+b]}).then(function(b){t({coords:{latitude:b.results[0].geometry.location.lat,
longitude:b.results[0].geometry.location.lng}})})};("undefined"===typeof Storage||"undefined"!==typeof Storage&&"true"!=localStorage.hideFlipDeviceTip)&&515>=window.innerWidth&&(a.master.hideFlipDeviceTip=!1);3<e.path().length?k():navigator.geolocation?(a.master.location=a.master.textData.yourExactPosition,navigator.geolocation.getCurrentPosition(t,b)):b()}angular.element(r).on("resize",function(){a.$apply(function(){a.master.height=window.innerHeight;a.master.width=window.innerWidth;515<a.master.width&&
(a.master.hideFlipDeviceTip=!0,"undefined"!==typeof Storage&&(localStorage.hideFlipDeviceTip=!0))})});"undefined"!==typeof Storage&&(localStorage.visits=Number(localStorage.visits||0)+1);Array.prototype.clean=function(b){for(var a=0;a<this.length;a++)this[a]==b&&(this.splice(a,1),a--);return this}}]);app.controller("searchController",["$http","$scope","$q","$sce","$httpx",function(q,a,r,e,n){var l=this;l.query="";l.matches=[];l.error=!1;l.search=function(){var a="?input="+encodeURIComponent(l.query);n.get("https://real-timer-server.tk:2087/place-search.php"+a,{lifetime:Infinity,alt_urls:"https://script.google.com/macros/s/AKfycby5ASPEN1ESxoUZru80yqRXBNVm4C5MkDcHL5asJs3KADFW1huc/exec"+a}).then(function(a){console.log(a);l.matches=a.predictions;for(a=0;a<l.matches.length;a++){var b=l.matches[a].terms[l.matches[a].terms.length-
1].value;"United States"==b&&(b="usa");"Iran"==b&&(b="irn");"United Kingdom"==b&&(b="gbr");"Germany"==b&&(b="deu");"Spain"==b&&(b="esp");"Malaysia"==b&&(b="mys");"Malta"==b&&(b="mlt");"United Arab Emirates"==b&&(b="are");"Japan"==b&&(b="jpn");"Denmark"==b&&(b="dnk");"Philippines"==b&&(b="phl");l.matches[a].country=b.substr(0,3).toLowerCase()}})}}]);app.controller("cookieCtrl",["$timeout","$scope",function(q,a){function r(a,e){return(e=document.cookie.match("(^|;)\\s*"+a+"\\s*=\\s*([^;]+)"))?e.pop():""}var e=this;e.elem=document.getElementsByClassName("cookie-box")[0];e.template="";e.close=function(){e.elem=document.getElementsByClassName("cookie-box")[0];try{e.elem.setAttribute("style","opacity:0;")}catch(n){console.warn(n)}"undefined"!==typeof Storage?localStorage.cookieAccept="true":document.cookie="cookiescriptaccept=visit";q(function(){e.elem&&
e.elem.parentNode.removeChild(e.elem)},500)};"undefined"!==typeof Storage&&"true"!=localStorage.cookieAccept&&"visit"!=r("cookiescriptaccept")?q(function(){e.elem=document.getElementsByClassName("cookie-box")[0];e.elem.setAttribute("style","opacity:1;");q(e.close,5E3)},2500):e.elem&&e.elem.parentNode.removeChild(e.elem)}]);